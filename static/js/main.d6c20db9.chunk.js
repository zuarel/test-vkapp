(this["webpackJsonpth-vkapp"]=this["webpackJsonpth-vkapp"]||[]).push([[0],{155:function(e,t,r){e.exports=r(249)},234:function(e,t,r){},249:function(e,t,r){"use strict";r.r(t);r(156),r(182),r(184),r(185),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224);var n=r(0),a=r.n(n),s=r(24),c=r.n(s),u=r(25),i=r.n(u),o=r(17),l=r.n(o),b=r(87),p=r(48),m=r(31),f=r(35),d=r(92),v=r.n(d),h=(r(233),r(234),r(26)),g=function(e){var t=e.item,r=e.source,n=e.subscribe,s=e.unsubscribe,c=e.isSubscriptionPage,u=e.unsubscribeColor,i=e.subscribeColor;return a.a.createElement("div",{className:"subscriptions-group-item ".concat(c&&"subscription-page")},a.a.createElement("div",{className:"subscriptions-group-item__info"},a.a.createElement("p",{className:"subscriptions-group-item__title"},t.name),a.a.createElement("p",{className:"subscriptions-group-item__count"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432: ",t.count)),a.a.createElement("div",{className:"subscriptions-group-item__action-block"},t.isSubscribed?a.a.createElement("button",{"data-source":r,onClick:function(){return s(t)},style:{backgroundColor:u||""},className:"subscriptions-group-button unsubscribe-button"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"):a.a.createElement("button",{"data-source":r,onClick:function(){return n(t)},style:{backgroundColor:i||""},className:"subscriptions-group-button subscribe-button"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){return e.slice(1).split("&").reduce((function(e,t){var r=t.split("="),n=Object(f.a)(r,2),a=n[0],s=n[1];return e[a]=s,e}),{})},w=function(e){return Object.entries(e).map((function(e){return e.join("=")})).join("&")},E=function(){var e=j(window.location.hash),t=j(window.location.search),r=t.vk_group_id||"",s=t.vk_user_id,c=e.s||"",u=Object(n.useState)([]),o=Object(f.a)(u,2),b=o[0],d=o[1],k=Object(n.useState)(!1),E=Object(f.a)(k,2),O=E[0],_=E[1],y=Object(n.useState)(null),C=Object(f.a)(y,2),S=C[0],P=C[1],N=Object(n.useState)({description:"",avatar:"",name:"",banner:"",unsubscribeColor:"",subscribeColor:""}),A=Object(f.a)(N,2),W=A[0],D=A[1],J=function(){var e=Object(m.a)(l.a.mark((function e(){var t,n,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=2;break}return e.abrupt("return");case 2:return _(!0),e.prev=3,e.next=6,fetch("https://smm-n.targethunter.dev/ajax?"+w({method:"vkapp.load_info",group_id:r,user_vk_id:s}));case 6:return t=e.sent,e.next=9,t.json();case 9:if(n=e.sent,c=n.subscriptions,"ok"===(u=Object(p.a)(n,["subscriptions"])).status){e.next=14;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435.");case 14:D(x({},W,{description:u.description,avatar:u.avatar,name:u.name,banner:u.banner,subscribeColor:u.subscribe_color,unsubscribeColor:u.unsubscribe_color})),d(c),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),_(!0),P(a.a.createElement(h.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return P(null)}},a.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),a.a.createElement("p",null,e.t0.message)));case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}}(),K=c?2:1,R=b.find((function(e){return e.id===c})),V=R?R.description||"":W.description||"",z=function(){var e=Object(m.a)(l.a.mark((function e(n){var a,c,u,i,o,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://smm-n.targethunter.dev/ajax?"+w({user_vk_id:s,method:"vkapp.subscribe_user",subscribe_id:n.id,group_id:r}),{method:"POST",body:JSON.stringify({params:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,u=c.status,i=Object(p.a)(c,["status"]),"ok"===u){e.next=10;break}throw new Error(i.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 10:o=b.map((function(e){return e})),(m=o.find((function(e){return e.id===n.id}))).isSubscribed=!0,m.count=n.count+1,d(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null;i.a.subscribe(function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("VKWebAppAllowMessagesFromGroupResult"!==t.detail.type){e.next=4;break}return e.next=4,z(F);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var G=function(){var e=Object(m.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(),F=t,e.prev=2,e.next=5,fetch("https://smm-n.targethunter.dev/ajax?"+w({user_vk_id:s,method:"vkapp.check_allowed",group_id:r}));case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,a.is_messages_from_group_allowed){e.next=14;break}return i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:+r}),P(null),e.abrupt("return");case 14:return e.next=16,z(t);case 16:B(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),alert(e.t0.toString());case 22:F=null;case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(l.a.mark((function e(n){var a,c,u,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://smm-n.targethunter.dev/ajax?"+w({user_vk_id:s,method:"vkapp.unsubscribe_user",subscribe_id:n.id,group_id:r}),{method:"POST",body:JSON.stringify({params:t})});case 3:return a=e.sent,e.next=6,a.json();case 6:if(c=e.sent,u=c.status,i=Object(p.a)(c,["status"]),"ok"===u){e.next=11;break}throw new Error(i.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 11:return n.isSubscribed=!1,n.count=n.count-1,e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),alert(e.t0.toString());case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(),r=b.map((function(e){return e})),n=r.find((function(e){return e.id===t.id})),e.next=5,I(n);case 5:d(r),q();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(l.a.mark((function e(){var t,n,a,c,u,i,o,p,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(),e.prev=1,e.next=4,fetch("https://smm-n.targethunter.dev/ajax?"+w({user_vk_id:s,method:"vkapp.unsubscribe_all",group_id:r}));case 4:return t=e.sent,e.next=7,t.json();case 7:if("ok"===(n=e.sent).status){e.next=10;break}throw new Error(n.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 10:H(),a=b.map((function(e){return e})),c=!0,u=!1,i=void 0,e.prev=15,o=a[Symbol.iterator]();case 17:if(c=(p=o.next()).done){e.next=26;break}if((m=p.value).isSubscribed){e.next=21;break}return e.abrupt("continue",23);case 21:return e.next=23,I(m);case 23:c=!0,e.next=17;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(15),u=!0,i=e.t0;case 32:e.prev=32,e.prev=33,c||null==o.return||o.return();case 35:if(e.prev=35,!u){e.next=38;break}throw i;case 38:return e.finish(35);case 39:return e.finish(32);case 40:d(a),q(),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(1),alert(e.t1.toString());case 47:case"end":return e.stop()}}),e,null,[[1,44],[15,28,32,40],[33,,35,39]])})));return function(){return e.apply(this,arguments)}}(),B=function(e){P(a.a.createElement(h.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return P(null)}},a.a.createElement("h2",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0440\u0441\u0441\u044b\u043b\u043a\u0443."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u0440\u043e \u043f\u0440\u0438\u0434\u0451\u0442 \u0412\u0430\u043c \u0432 \u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f."),e&&a.a.createElement(h.c,null,a.a.createElement(h.b,{onClick:function(){return window.top.location.href="https://vk.com/im?sel=-"+r},size:"l",stretched:!0},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c"))))},q=function(){P(a.a.createElement(h.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return P(null)}},a.a.createElement("h2",null,"\u0412\u044b \u043e\u0442\u043f\u0438\u0441\u0430\u043d\u044b."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0412\u0430\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u044c.")))},H=function(){P(a.a.createElement(h.f,{size:"large"}))};return Object(n.useEffect)((function(){J()})),a.a.createElement(v.a,{popout:S,activePanel:"main"},a.a.createElement(h.d,{id:"main"},a.a.createElement(h.e,null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"),a.a.createElement("div",{style:{textAlign:"center"}},R&&R.banner&&a.a.createElement("img",{src:R.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}}),W.banner&&a.a.createElement("img",{src:W.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}})),a.a.createElement("div",{style:{padding:"15px"}},(!R||!R.banner)&&!W.banner&&a.a.createElement("p",{className:"page-title"},a.a.createElement("img",{src:W.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u0430\u0431\u043b\u0438\u043a\u0430",style:{borderRadius:"50%",marginRight:"16px"}}),W.name),a.a.createElement("p",{className:"page-description"},V),b.filter((function(e){return!c||e.id===c})).map((function(e){return a.a.createElement(g,{item:e,source:K,subscribe:G,unsubscribe:M,subscribeColor:W.subscribeColor,unsubscribeColor:W.unsubscribeColor,isSubscriptionPage:!!R,key:e.id})})),b.filter((function(e){return e.isSubscribed})).length>0&&a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement("button",{onClick:T,"data-source":"1",style:{backgroundColor:W.unsubscribeColor},className:"subscriptions-group-button unsubscribe-button unsubscribe-all",id:"unsubscribe-all"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0432\u0441\u0435\u0445 \u0440\u0430\u0441\u0441\u044b\u043b\u043e\u043a")))))};i.a.send("VKWebAppInit"),c.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.d6c20db9.chunk.js.map