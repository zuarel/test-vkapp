(this["webpackJsonpth-vkapp"]=this["webpackJsonpth-vkapp"]||[]).push([[0],{161:function(e,t,n){e.exports=n(258)},240:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);n(162),n(188),n(190),n(191),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230);var r=n(0),a=n.n(r),u=n(24),s=n.n(u),c=n(25),i=n.n(c),o=n(17),p=n.n(o),l=n(96),m=n(47),b=n(31),d=n(35),f=n(95),_=n.n(f),v=(n(239),n(240),n(26)),h=function(e){var t=e.item,n=e.source,r=e.subscribe,u=e.unsubscribe,s=e.isSubscriptionPage,c=e.unsubscribeColor,i=e.subscribeColor;return a.a.createElement("div",{className:"subscriptions-group-item ".concat(s&&"subscription-page")},a.a.createElement("div",{className:"subscriptions-group-item__info"},a.a.createElement("p",{className:"subscriptions-group-item__title"},t.name),a.a.createElement("p",{className:"subscriptions-group-item__count"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432: ",t.count)),a.a.createElement("div",{className:"subscriptions-group-item__action-block"},t.isSubscribed?a.a.createElement("button",{"data-source":n,onClick:function(){return u(t)},style:{backgroundColor:c||""},className:"subscriptions-group-button unsubscribe-button"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"):a.a.createElement("button",{"data-source":n,onClick:function(){return r(t)},style:{backgroundColor:i||""},className:"subscriptions-group-button subscribe-button"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")))},g=function(e){return e.slice(1).split("&").reduce((function(e,t){var n=t.split("="),r=Object(d.a)(n,2),a=r[0],u=r[1];return e[a]=u,e}),{})},k=function(e){return Object.entries(e).map((function(e){return e.join("=")})).join("&")},x=function(){var e=g(window.location.hash),t=g(window.location.search),n=t.vk_group_id||"",u=t.vk_user_id,s=e.s||"",c=e.u||"",o=Object(r.useState)([]),f=Object(d.a)(o,2),x=f[0],E=f[1],w=Object(r.useState)(!1),j=Object(d.a)(w,2),y=j[0],O=j[1],S=Object(r.useState)(null),C=Object(d.a)(S,2),N=C[0],A=C[1],P=Object(r.useState)({description:"",avatar:"",name:"",banner:"",unsubscribeColor:"",subscribeColor:""}),F=Object(d.a)(P,2),J=F[0],W=F[1],D=function(){var e=Object(b.a)(p.a.mark((function e(){var t,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.prev=3,e.next=6,fetch("https://smm-n.targethunter.dev/ajax?"+k({method:"vkapp.load_info",group_id:n,user_vk_id:u}));case 6:return t=e.sent,e.next=9,t.json();case 9:if(r=e.sent,s=r.subscriptions,"ok"===(c=Object(m.a)(r,["subscriptions"])).status){e.next=14;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435.");case 14:W(Object(l.a)({},J,{description:c.description,avatar:c.avatar,name:c.name,banner:c.banner,subscribeColor:c.subscribe_color,unsubscribeColor:c.unsubscribe_color})),E(s),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),O(!0),A(a.a.createElement(v.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return A(null)}},a.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),a.a.createElement("p",null,e.t0.message)));case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}}(),K=s?2:1,R=x.find((function(e){return e.id===s})),T=R?R.description||"":J.description||"",V=function(){var r=Object(b.a)(p.a.mark((function r(a){var s,i,o,l,b,d,f;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(s=new FormData).append("user_vk_id",u),s.append("group_id",n),s.append("subscribe_id",a.id),s.append("source",String(K)),s.append("tag_id",c),s.append("utm_source",e.utm_source||""),s.append("utm_medium",e.utm_medium||""),s.append("utm_campaign",e.utm_campaign||""),s.append("utm_content",e.utm_content||""),s.append("utm_term",e.utm_term||""),s.append("params",JSON.stringify(t)),r.next=14,fetch("https://smm-n.targethunter.dev/ajax?"+k({method:"vkapp.subscribe_user"}),{method:"POST",body:s});case 14:return i=r.sent,r.next=17,i.json();case 17:if(o=r.sent,l=o.status,b=Object(m.a)(o,["status"]),"ok"===l){r.next=22;break}throw new Error(b.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 22:d=x.map((function(e){return e})),(f=d.find((function(e){return e.id===a.id}))).isSubscribed=!0,f.count=a.count+1,E(d);case 27:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),z=null;i.a.subscribe(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("VKWebAppAllowMessagesFromGroupResult"!==t.detail.type){e.next=4;break}return e.next=4,V(z);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var G=function(){var e=Object(b.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),z=t,e.prev=2,e.next=5,fetch("https://smm-n.targethunter.dev/ajax?"+k({user_vk_id:u,method:"vkapp.check_allowed",group_id:n}));case 5:return r=e.sent,e.next=8,r.json();case 8:if(a=e.sent,a.is_messages_from_group_allowed){e.next=14;break}return i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:+n}),A(null),e.abrupt("return");case 14:return e.next=16,V(t);case 16:q(!0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),A(null),alert(e.t0.toString());case 23:z=null;case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var r=Object(b.a)(p.a.mark((function r(a){var s,i,o,l,b;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(s=new FormData).append("user_vk_id",u),s.append("group_id",n),s.append("subscribe_id",a.id),s.append("source",String(K)),s.append("tag_id",c),s.append("utm_source",e.utm_source||""),s.append("utm_medium",e.utm_medium||""),s.append("utm_campaign",e.utm_campaign||""),s.append("utm_content",e.utm_content||""),s.append("utm_term",e.utm_term||""),s.append("params",JSON.stringify(t)),r.next=14,fetch("https://smm-n.targethunter.dev/ajax?"+k({method:"vkapp.unsubscribe_user"}),{method:"POST",body:s});case 14:return i=r.sent,r.next=17,i.json();case 17:if(o=r.sent,l=o.status,b=Object(m.a)(o,["status"]),"ok"===l){r.next=22;break}throw new Error(b.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 22:return a.isSubscribed=!1,a.count=a.count-1,r.abrupt("return",a);case 25:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(),n=x.map((function(e){return e})),r=n.find((function(e){return e.id===t.id})),e.next=6,I(r);case 6:E(n),H(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),A(null),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var r=Object(b.a)(p.a.mark((function r(){var a,s,i,o,l,m,b,d,f,_;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return L(),r.prev=1,(a=new FormData).append("user_vk_id",u),a.append("group_id",n),a.append("source",String(K)),a.append("tag_id",c),a.append("utm_source",e.utm_source||""),a.append("utm_medium",e.utm_medium||""),a.append("utm_campaign",e.utm_campaign||""),a.append("utm_content",e.utm_content||""),a.append("utm_term",e.utm_term||""),a.append("params",JSON.stringify(t)),r.next=15,fetch("https://smm-n.targethunter.dev/ajax?"+k({method:"vkapp.unsubscribe_all"}),{method:"POST",body:a});case 15:return s=r.sent,r.next=18,s.json();case 18:if("ok"===(i=r.sent).status){r.next=21;break}throw new Error(i.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 21:L(),o=x.map((function(e){return e})),l=!0,m=!1,b=void 0,r.prev=26,d=o[Symbol.iterator]();case 28:if(l=(f=d.next()).done){r.next=37;break}if((_=f.value).isSubscribed){r.next=32;break}return r.abrupt("continue",34);case 32:_.isSubscribed=!1,_.count=_.count-1;case 34:l=!0,r.next=28;break;case 37:r.next=43;break;case 39:r.prev=39,r.t0=r.catch(26),m=!0,b=r.t0;case 43:r.prev=43,r.prev=44,l||null==d.return||d.return();case 46:if(r.prev=46,!m){r.next=49;break}throw b;case 49:return r.finish(46);case 50:return r.finish(43);case 51:E(o),H(),r.next=59;break;case 55:r.prev=55,r.t1=r.catch(1),A(null),alert(r.t1.toString());case 59:case"end":return r.stop()}}),r,null,[[1,55],[26,39,43,51],[44,,46,50]])})));return function(){return r.apply(this,arguments)}}(),q=function(e){A(a.a.createElement(v.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return A(null)}},a.a.createElement("h2",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0440\u0441\u0441\u044b\u043b\u043a\u0443."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u0440\u043e \u043f\u0440\u0438\u0434\u0451\u0442 \u0412\u0430\u043c \u0432 \u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f."),e&&a.a.createElement(v.c,null,a.a.createElement(v.b,{onClick:function(){return window.top.location.href="https://vk.com/im?sel=-"+n},size:"l",stretched:!0},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c"))))},H=function(){A(a.a.createElement(v.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return A(null)}},a.a.createElement("h2",null,"\u0412\u044b \u043e\u0442\u043f\u0438\u0441\u0430\u043d\u044b."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0412\u0430\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u044c.")))},L=function(){A(a.a.createElement(v.f,{size:"large"}))};return Object(r.useEffect)((function(){D()})),a.a.createElement(_.a,{popout:N,activePanel:"main"},a.a.createElement(v.d,{id:"main"},a.a.createElement(v.e,null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 123131"),a.a.createElement("div",{style:{textAlign:"center"}},R&&R.banner&&a.a.createElement("img",{src:R.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}}),J.banner&&a.a.createElement("img",{src:J.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}})),a.a.createElement("div",{style:{padding:"15px"}},(!R||!R.banner)&&!J.banner&&a.a.createElement("p",{className:"page-title"},a.a.createElement("img",{src:J.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u0430\u0431\u043b\u0438\u043a\u0430",style:{borderRadius:"50%",marginRight:"16px"}}),J.name),a.a.createElement("p",{className:"page-description"},T),x.filter((function(e){return!s||e.id===s})).map((function(e){return a.a.createElement(h,{item:e,source:K,subscribe:G,unsubscribe:M,subscribeColor:J.subscribeColor,unsubscribeColor:J.unsubscribeColor,isSubscriptionPage:!!R,key:e.id})})),x.filter((function(e){return e.isSubscribed})).length>0&&a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement("button",{onClick:B,"data-source":"1",style:{backgroundColor:J.unsubscribeColor},className:"subscriptions-group-button unsubscribe-button unsubscribe-all",id:"unsubscribe-all"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0432\u0441\u0435\u0445 \u0440\u0430\u0441\u0441\u044b\u043b\u043e\u043a")))))};i.a.send("VKWebAppInit"),s.a.render(a.a.createElement(x,null),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.4c14bd27.chunk.js.map