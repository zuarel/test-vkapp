(this["webpackJsonpth-vkapp"]=this["webpackJsonpth-vkapp"]||[]).push([[0],{155:function(e,t,n){e.exports=n(249)},234:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);n(156),n(182),n(184),n(185),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224);var r=n(0),a=n.n(r),u=n(24),c=n.n(u),s=n(25),i=n.n(s),o=n(17),p=n.n(o),l=n(87),b=n(48),m=n(31),d=n(35),f=n(92),v=n.n(f),_=(n(233),n(234),n(26)),h=function(e){var t=e.item,n=e.source,r=e.subscribe,u=e.unsubscribe,c=e.isSubscriptionPage,s=e.unsubscribeColor,i=e.subscribeColor;return a.a.createElement("div",{className:"subscriptions-group-item ".concat(c&&"subscription-page")},a.a.createElement("div",{className:"subscriptions-group-item__info"},a.a.createElement("p",{className:"subscriptions-group-item__title"},t.name),a.a.createElement("p",{className:"subscriptions-group-item__count"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432: ",t.count)),a.a.createElement("div",{className:"subscriptions-group-item__action-block"},t.isSubscribed?a.a.createElement("button",{"data-source":n,onClick:function(){return u(t)},style:{backgroundColor:s||""},className:"subscriptions-group-button unsubscribe-button"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"):a.a.createElement("button",{"data-source":n,onClick:function(){return r(t)},style:{backgroundColor:i||""},className:"subscriptions-group-button subscribe-button"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f")))};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){return e.slice(1).split("&").reduce((function(e,t){var n=t.split("="),r=Object(d.a)(n,2),a=r[0],u=r[1];return e[a]=u,e}),{})},w=function(e){return Object.entries(e).map((function(e){return e.join("=")})).join("&")},j=function(){var e=x(window.location.hash),t=x(window.location.search),n=t.vk_group_id||"",u=t.vk_user_id,c=e.s||"",s=e.u||"",o=Object(r.useState)([]),l=Object(d.a)(o,2),f=l[0],g=l[1],j=Object(r.useState)(!1),O=Object(d.a)(j,2),E=O[0],y=O[1],S=Object(r.useState)(null),C=Object(d.a)(S,2),P=C[0],N=C[1],A=Object(r.useState)({description:"",avatar:"",name:"",banner:"",unsubscribeColor:"",subscribeColor:""}),D=Object(d.a)(A,2),F=D[0],J=D[1],W=function(){var e=Object(m.a)(p.a.mark((function e(){var t,r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.prev=3,e.next=6,fetch("https://smm-n.targethunter.dev/ajax?"+w({method:"vkapp.load_info",group_id:n,user_vk_id:u}));case 6:return t=e.sent,e.next=9,t.json();case 9:if(r=e.sent,c=r.subscriptions,"ok"===(s=Object(b.a)(r,["subscriptions"])).status){e.next=14;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435.");case 14:J(k({},F,{description:s.description,avatar:s.avatar,name:s.name,banner:s.banner,subscribeColor:s.subscribe_color,unsubscribeColor:s.unsubscribe_color})),g(c),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),y(!0),N(a.a.createElement(_.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return N(null)}},a.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),a.a.createElement("p",null,e.t0.message)));case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}}(),K=c?2:1,R=f.find((function(e){return e.id===c})),T=R?R.description||"":F.description||"",V=function(){var r=Object(m.a)(p.a.mark((function r(a){var c,i,o,l,m,d,v;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c=new FormData).append("user_vk_id",u),c.append("group_id",n),c.append("subscribe_id",a.id),c.append("source",String(K)),c.append("tag_id",s),c.append("utm_source",e.utm_source||""),c.append("utm_medium",e.utm_medium||""),c.append("utm_campaign",e.utm_campaign||""),c.append("utm_content",e.utm_content||""),c.append("utm_term",e.utm_term||""),c.append("params",JSON.stringify(t)),r.next=14,fetch("https://smm-n.targethunter.dev/ajax?"+w({method:"vkapp.subscribe_user"}),{method:"POST",body:c});case 14:return i=r.sent,r.next=17,i.json();case 17:if(o=r.sent,l=o.status,m=Object(b.a)(o,["status"]),"ok"===l){r.next=22;break}throw new Error(m.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 22:d=f.map((function(e){return e})),(v=d.find((function(e){return e.id===a.id}))).isSubscribed=!0,v.count=a.count+1,g(d);case 27:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),z=null;i.a.subscribe(function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("VKWebAppAllowMessagesFromGroupResult"!==t.detail.type){e.next=4;break}return e.next=4,V(z);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var G=function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),z=t,e.prev=2,e.next=5,fetch("https://smm-n.targethunter.dev/ajax?"+w({user_vk_id:u,method:"vkapp.check_allowed",group_id:n}));case 5:return r=e.sent,e.next=8,r.json();case 8:if(a=e.sent,a.is_messages_from_group_allowed){e.next=14;break}return i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:+n}),N(null),e.abrupt("return");case 14:return e.next=16,V(t);case 16:q(!0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),N(null),alert(e.t0.toString());case 23:z=null;case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var r=Object(m.a)(p.a.mark((function r(a){var c,i,o,l,m;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c=new FormData).append("user_vk_id",u),c.append("group_id",n),c.append("subscribe_id",a.id),c.append("source",String(K)),c.append("tag_id",s),c.append("utm_source",e.utm_source||""),c.append("utm_medium",e.utm_medium||""),c.append("utm_campaign",e.utm_campaign||""),c.append("utm_content",e.utm_content||""),c.append("utm_term",e.utm_term||""),c.append("params",JSON.stringify(t)),r.next=14,fetch("https://smm-n.targethunter.dev/ajax?"+w({method:"vkapp.unsubscribe_user"}),{method:"POST",body:c});case 14:return i=r.sent,r.next=17,i.json();case 17:if(o=r.sent,l=o.status,m=Object(b.a)(o,["status"]),"ok"===l){r.next=22;break}throw new Error(m.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 22:return a.isSubscribed=!1,a.count=a.count-1,r.abrupt("return",a);case 25:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(),n=f.map((function(e){return e})),r=n.find((function(e){return e.id===t.id})),e.next=6,I(r);case 6:g(n),H(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(null),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var r=Object(m.a)(p.a.mark((function r(){var a,c,i,o,l,b,m,d,v,_;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return L(),r.prev=1,(a=new FormData).append("user_vk_id",u),a.append("group_id",n),a.append("source",String(K)),a.append("tag_id",s),a.append("utm_source",e.utm_source||""),a.append("utm_medium",e.utm_medium||""),a.append("utm_campaign",e.utm_campaign||""),a.append("utm_content",e.utm_content||""),a.append("utm_term",e.utm_term||""),a.append("params",JSON.stringify(t)),r.next=15,fetch("https://smm-n.targethunter.dev/ajax?"+w({method:"vkapp.unsubscribe_all"}),{method:"POST",body:a});case 15:return c=r.sent,r.next=18,c.json();case 18:if("ok"===(i=r.sent).status){r.next=21;break}throw new Error(i.text||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f");case 21:L(),o=f.map((function(e){return e})),l=!0,b=!1,m=void 0,r.prev=26,d=o[Symbol.iterator]();case 28:if(l=(v=d.next()).done){r.next=37;break}if((_=v.value).isSubscribed){r.next=32;break}return r.abrupt("continue",34);case 32:_.isSubscribed=!1,_.count=R.count-1;case 34:l=!0,r.next=28;break;case 37:r.next=43;break;case 39:r.prev=39,r.t0=r.catch(26),b=!0,m=r.t0;case 43:r.prev=43,r.prev=44,l||null==d.return||d.return();case 46:if(r.prev=46,!b){r.next=49;break}throw m;case 49:return r.finish(46);case 50:return r.finish(43);case 51:g(o),H(),r.next=59;break;case 55:r.prev=55,r.t1=r.catch(1),N(null),alert(r.t1.toString());case 59:case"end":return r.stop()}}),r,null,[[1,55],[26,39,43,51],[44,,46,50]])})));return function(){return r.apply(this,arguments)}}(),q=function(e){N(a.a.createElement(_.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return N(null)}},a.a.createElement("h2",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0440\u0441\u0441\u044b\u043b\u043a\u0443."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u0440\u043e \u043f\u0440\u0438\u0434\u0451\u0442 \u0412\u0430\u043c \u0432 \u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f."),e&&a.a.createElement(_.c,null,a.a.createElement(_.b,{onClick:function(){return window.top.location.href="https://vk.com/im?sel=-"+n},size:"l",stretched:!0},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c"))))},H=function(){N(a.a.createElement(_.a,{actions:[{title:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:function(){return N(null)}},a.a.createElement("h2",null,"\u0412\u044b \u043e\u0442\u043f\u0438\u0441\u0430\u043d\u044b."),a.a.createElement("p",null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0412\u0430\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u044c.")))},L=function(){N(a.a.createElement(_.f,{size:"large"}))};return Object(r.useEffect)((function(){W()})),a.a.createElement(v.a,{popout:P,activePanel:"main"},a.a.createElement(_.d,{id:"main"},a.a.createElement(_.e,null,"\u0420\u0430\u0441\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"),a.a.createElement("div",{style:{textAlign:"center"}},R&&R.banner&&a.a.createElement("img",{src:R.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}}),F.banner&&a.a.createElement("img",{src:F.banner,alt:"\u0411\u0430\u043d\u043d\u0435\u0440",style:{maxWidth:"100%"}})),a.a.createElement("div",{style:{padding:"15px"}},(!R||!R.banner)&&!F.banner&&a.a.createElement("p",{className:"page-title"},a.a.createElement("img",{src:F.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u0430\u0431\u043b\u0438\u043a\u0430",style:{borderRadius:"50%",marginRight:"16px"}}),F.name),a.a.createElement("p",{className:"page-description"},T),f.filter((function(e){return!c||e.id===c})).map((function(e){return a.a.createElement(h,{item:e,source:K,subscribe:G,unsubscribe:M,subscribeColor:F.subscribeColor,unsubscribeColor:F.unsubscribeColor,isSubscriptionPage:!!R,key:e.id})})),f.filter((function(e){return e.isSubscribed})).length>0&&a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement("button",{onClick:B,"data-source":"1",style:{backgroundColor:F.unsubscribeColor},className:"subscriptions-group-button unsubscribe-button unsubscribe-all",id:"unsubscribe-all"},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u0432\u0441\u0435\u0445 \u0440\u0430\u0441\u0441\u044b\u043b\u043e\u043a")))))};i.a.send("VKWebAppInit"),c.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.952b7899.chunk.js.map